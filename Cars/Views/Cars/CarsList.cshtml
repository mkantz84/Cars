@model IEnumerable<Cars.Models.Car>

@{
    ViewBag.Title = "CarsList";
}



@*<script src="~/Scripts/jquery-1.12.4.min.js"></script>*@
@*<script src="~/Scripts/bootstrap.min.js"></script>*@
@*<script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>*@
@*<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>*@
@*<script src="https://code.jquery.com/jquery-1.12.4.js"></script>*@
@*@Scripts.Render("~/bundles/jqueryui")*@
@*<script>
    $(document).ready(function () {
        $("#date").datepicker();
    });
</script>*@



<script>
    $(".input-daterange input").each(function () {
        $(this).datepicker("clearDates");
    });
</script>
<script>
    function a(carNumber, Id) {
        var items = localStorage.interests;
        if (localStorage.interests == null) {
            localStorage.interests = carNumber;
        }
        else if (!items.includes(carNumber)) {
            localStorage.interests += "," + carNumber;
        }
    }
    function validate() {
        var start = document.getElementById("txtStartDate").value;
        var end = document.getElementById("txtEndDate").value;
        if (start == "" && end == "") {
            alert("Dates must be filled");
            return false;
        }
        else if (start == "") {
            alert("Start date must be filled");
            return false;
        }
        else if (end == "") {
            alert("End date must be filled");
            return false;
        }
        $.post('InitStartDate', { startDate: start });
        $.post('InitEndDate', { endDate: end });
    }
</script>
<h2>CarsList</h2>
    Start Date:
from:<input type="date" id="txtStartDate" value="" />
to:<input type="date" id="txtEndDate" value="" />
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.CarType.ModelName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Store.StoreName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CarNumber)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Kilometer)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.CarType.ModelName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Store.StoreName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CarNumber)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Kilometer)
            </td>
            <td onclick="a(@item.CarNumber)">
                @Html.ActionLink("Continue", "Details", new { id = item.ID }, htmlAttributes: new { @onclick = "return validate()" })
            </td>
        </tr>
    }

</table>